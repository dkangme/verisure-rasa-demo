version: "3.1"

intents:
  - start
  - confirm_identity
  - deny_identity
  - can_pay
  - cannot_pay
  - ask_invoice_date
  - payment_date_response
  - financial_difficulty
  - payment_dispute
  - nlu_fallback
  - out_of_scope
  - EXTERNAL_init_context

entities:
  - client_name

slots:
  client_name:
    type: text
    mappings:
    - type: from_entity
      entity: client_name
  is_dennis:
    type: bool
    mappings:
    - type: custom
  payment_response:
    type: text
    mappings:
    - type: custom
  payment_date:
    type: text
    mappings:
    - type: custom
  reason_type:
    type: text
    mappings:
    - type: custom
  invoice_date:
    type: text
    mappings:
    - type: custom
  pending_invoice_count:
    type: text
    mappings:
    - type: custom
  pending_invoice_total:
    type: text
    mappings:
    - type: custom

responses:
  utter_greeting_and_identity_check:
    - text: "Hola soy veriBot el asistente digital de Verisure. Quisiera entregarle información importante de sus facturas, ¿hablo con {client_name}?"

  utter_wrong_person:
    - text: "Lamento molestarlo, registraré en nuestros sistemas esta información. Que tenga un buen día."

  utter_invoice_pending_info:
    - text: "Buenos días don {client_name}, le informo que tiene {pending_invoice_count} factura(s) pendiente(s) de pago por un monto total de {pending_invoice_total}. Quisiera saber si podrá pagarla(s) dentro de los siguientes 5 días."

  utter_ask_payment_date:
    - text: "¿Me puede indicar la fecha que con seguridad pagará la factura?"

  utter_payment_confirmed:
    - text: "Perfecto don {client_name}, registro {payment_date} como su día de pago. Que tenga buen día."

  utter_ask_reason:
    - text: "¿Me puede indicar la razón por la que no puede pagar la factura?"

  utter_invoice_date_info:
    - text: "La factura fue emitida el 1 de mayo de 2025 con fecha de vencimiento 23 de mayo de 2025."

  utter_financial_difficulty:
    - text: "Don {client_name}, lamento escuchar esto. Si lo desea puede comunicarse con nosotros al 600 700 7000 para escuchar otras formas de ponerse al día con su cuenta. Que tenga un buen día."

  utter_payment_dispute:
    - text: "Perfecto don {client_name}, registraré esta información para verificar en nuestros sistemas. Lamento esta situación. Que tenga buen día."

  utter_final_response:
    - text: "Gracias por su tiempo. Que tenga un buen día."

  utter_free_chitchat_response:
    - text: "Hola, soy veriBot el asistente digital de Verisure. ¿En qué puedo ayudarle hoy?"

actions:
  - action_extract_client_name
  - action_check_identity
  - action_handle_identity_response
  - action_handle_payment_response
  - action_handle_date_question
  - action_classify_reason
  - action_check_sufficient_funds
  - action_get_pending_invoices_info
  - action_get_invoice_date_info